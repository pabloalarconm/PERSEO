#!/bin/bash

declare -a Models=(
 "CDE"
# "birthdate" "sex" "status" "date_of_death" "care_pathway" "diagnosis" "onset_diagnosis" "onset_symptoms" "genotype_hgvs" "genotype_omim" "genotype_hgnc" "phenotype" "disability" "consent" "biobank"
# "flash_cards_one"
# "personal_information" "patient_status" "care_pathway" "diagnosis" "disease_history" "genetic_diagnosis" "phenotyping" "undiagnosed" "patient_consent" "disability"
)

for val in ${Models[@]}; 
do
    ######################### CREATION YARRRML  #######################
    # cd embuilds
    # python3 builder_CDE.py >> ../config/${val}_yarrrml_template.yaml
    # cd ..
    # #######################################################################

    ################### (RE)GENERATE UNIQID ######################
    # sudo python3 medusa.py uniqid ${PWD}/data${val}.csv 
    ##############################################################

    ################### RDF TRANSFORMATION ######################
    irb run_me_to_test.rb $val 
    ##############################################################


    ################### CLEANING ######################
    sudo rm data/${val}_rml.ttl 
    sudo rm data/${val}_yarrrml.yaml
    sudo rm data/${val}.ini
    sudo rm data/triples/${val}_datasets_stats.csv
    # sudo rm data/triplesstats.csv

    # sudo rm config/${val}_yarrrml_template.yaml
    ##############################################################
    sudo chmod -R 777 .
    ###################### NT 2 TURTLE ##########################
    # python3 medusa.py quad ${PWD}/data/triples/${val}
    ##############################################################

done


sudo chmod -R 777 .

# for val in ${Models[@]}; 
# do
#     # Use Web tool to obtain RDF-based CSV to create Image:
#     curl -X POST "http://178.63.49.197:5000/draw-io-utils/turtle-to-csv" -H "accept: text/csv" -H "Content-Type: multipart/form-data" -F "file=@${PWD}/data/triples/${val}.ttl;type=text/turtle" > ${PWD}/drawio/${val}.csv
# done