#!/bin/bash

declare -a Models=(
# "DCDE" "CDE"
"birthdate" "sex" "care_pathway" "diagnosis" "date_of_diagnosis" "date_of_symptom" "genotype" "phenotype" "disability" "consent"
# "flash_cards_one"
# "personal_information" "patient_status" "care_pathway" "diagnosis" "disease_history" "genetic_diagnosis" "phenotyping" "undiagnosed" "patient_consent" "disability"
)

for val in ${Models[@]}; 
do
    
    # sudo python3 medusa.py uniqid ${PWD}/data${val}.csv # Create/Regenerate new uniqid

    irb run_me_to_test.rb $val # Run Ruby-based RDF transformation

    sudo rm data/${val}_rml.ttl 
    sudo rm data/${val}_yarrrml.yaml
    sudo rm data/${val}.ini
    sudo rm data/triples/${val}_datasets_stats.csv
    sudo rm data/triplesstats.csv

    python3 medusa.py quad ${PWD}/data/triples/${val} # Transform resulting .nt file into Turtle
done


sudo chmod -R 777 .

# for val in ${Models[@]}; 
# do
#     # Use Web tool to obtain RDF-based CSV to create Image:
#     curl -X POST "http://178.63.49.197:5000/draw-io-utils/turtle-to-csv" -H "accept: text/csv" -H "Content-Type: multipart/form-data" -F "file=@${PWD}/data/triples/${val}.ttl;type=text/turtle" > ${PWD}/drawio/${val}.csv
# done